# 레포지토리 남은 할 일

## 📊 현재 상태

### ✅ 완료된 항목
- ✅ CRUD 기능 (Instruments, Clients, Connections) - 100%
- ✅ 검색/필터/정렬 - 100%
- ✅ 데이터 동기화 - 100%
- ✅ 캘린더 기능 - 100%
- ✅ 인라인 편집 - 100%
- ✅ 태그 시스템 - 100%
- ✅ subtype 컬럼 마이그레이션 파일 생성
- ✅ status 제약조건 업데이트 마이그레이션 파일 생성
- ✅ 레포지토리 정리 완료

### ⚠️ 진행 중 / 확인 필요
- ⚠️ 데이터베이스 마이그레이션 실행 확인 필요
- ⚠️ 테스트 커버리지: 43% → 목표 70%
- ⚠️ 린터 경고: 16개 (미사용 변수)

---

## 🚨 1순위: 필수 작업 (즉시 수행)

### 1. 데이터베이스 마이그레이션 실행 ⭐

**상태**: 마이그레이션 파일은 생성되었으나 실행 여부 확인 필요

**작업 내용:**
- [ ] `subtype` 컬럼 추가 마이그레이션 실행
  - 파일: `supabase/migrations/20241112141803_add_subtype_column.sql`
  - SQL: `ALTER TABLE instruments ADD COLUMN IF NOT EXISTS subtype TEXT;`
- [ ] `status` 제약조건 업데이트 마이그레이션 실행
  - 파일: `supabase/migrations/20241112141804_update_status_constraint.sql`
  - Reserved, Maintenance 상태 추가
- [ ] `updated_at` 트리거 추가 마이그레이션 실행 (선택적)
  - 파일: `supabase/migrations/20241112141805_add_updated_at_trigger.sql`
- [ ] 스키마 확인
  - 명령: `npm run schema:check`
  - 모든 마이그레이션이 성공적으로 적용되었는지 확인

**실행 방법:**
```bash
# 방법 1: Supabase 대시보드에서 실행 (권장)
# 1. https://supabase.com/dashboard/project/dmilmlhquttcozxlpfxw 접속
# 2. SQL Editor 열기
# 3. 마이그레이션 파일 내용 복사하여 실행

# 방법 2: npm 스크립트 사용
npm run migrate:subtype

# 방법 3: 스키마 확인
npm run schema:check
```

**가이드**: [docs/migrations/README.md](./docs/migrations/README.md)

---

### 2. 인증 시스템 완성 (30% → 100%)

**현재 상태**: 로그인만 가능, 회원가입/로그아웃 없음

**작업 내용:**
- [ ] 회원가입 페이지 구현
  - 파일: `src/app/signup/page.tsx` (이미 존재하나 기능 구현 필요)
  - Supabase Auth `signUp` 메서드 사용
- [ ] 로그아웃 기능 구현
  - 헤더에 로그아웃 버튼 추가
  - Supabase Auth `signOut` 메서드 사용
- [ ] 세션 관리 구현
  - 인증 상태 체크
  - 자동 로그아웃 (선택적)
- [ ] 인증 Context 개선
  - 파일: `src/contexts/AuthContext.tsx` (이미 존재하나 기능 확인 필요)
  - 전역 인증 상태 관리

**우선순위**: 높음 (프로덕션 배포 전 필수)

---

### 3. 환경 변수 설정 확인

**작업 내용:**
- [ ] `.env.local` 파일 확인
  - `NEXT_PUBLIC_SUPABASE_URL` 설정 확인
  - `NEXT_PUBLIC_SUPABASE_ANON_KEY` 설정 확인
  - `DATABASE_PASSWORD` 설정 확인 (스키마 확인용)
- [ ] Vercel 환경 변수 설정 확인
  - 프로덕션 환경 변수 설정
  - 스테이징 환경 변수 설정 (선택적)

---

## 🎯 2순위: 핵심 기능 구현

### 4. 이미지 업로드 기능 (10% → 100%)

**현재 상태**: UI만 있고 실제 업로드 기능 없음

**작업 내용:**
- [ ] Supabase Storage 설정
  - Storage bucket 생성 및 설정
  - RLS 정책 설정
- [ ] 이미지 업로드 컴포넌트 구현
  - 파일: `src/app/dashboard/components/ItemForm.tsx`
  - Supabase Storage API 사용
- [ ] 이미지 미리보기 기능
  - 업로드 전 미리보기
  - 이미지 갤러리 뷰
- [ ] 이미지 리사이징/압축 (선택적)
  - 클라이언트 사이드 리사이징
  - 서버 사이드 리사이징 (선택적)
- [ ] 이미지 갤러리 뷰
  - Instrument 상세 페이지에 이미지 갤러리 추가
  - 이미지 삭제 기능

**우선순위**: 중간 (사용자 경험 향상)

---

### 5. Sales History 기능 (0% → 100%)

**현재 상태**: 데이터베이스 스키마만 있고 기능 없음

**작업 내용:**
- [ ] Sales History 페이지 생성
  - 파일: `src/app/sales/page.tsx` 생성
  - 판매 기록 목록 표시
- [ ] 판매 기록 CRUD 구현
  - 판매 기록 생성
  - 판매 기록 수정
  - 판매 기록 삭제
  - 판매 기록 조회
- [ ] 판매 통계/차트 (선택적)
  - 월별/연도별 판매 통계
  - 차트 라이브러리 사용 (recharts 등)
- [ ] 판매 리포트 기능 (선택적)
  - PDF 리포트 생성
  - CSV 내보내기

**우선순위**: 중간 (비즈니스 기능)

---

### 6. Customer 페이지 완성 (10% → 100%)

**현재 상태**: 빈 템플릿만 있음

**작업 내용:**
- [ ] Customer 목록/검색
  - Clients 페이지와 유사한 기능
  - 고객 목록 표시
- [ ] Customer 상세 정보
  - 고객 상세 페이지
  - 구매 이력 표시
- [ ] Customer별 구매 이력
  - Sales History와 연동
  - 고객별 판매 기록 조회
- [ ] Customer 통계 (선택적)
  - 구매 횟수, 총액 등

**우선순위**: 낮음 (Clients 페이지와 중복 가능)

---

### 7. Instruments 페이지 확장

**작업 내용:**
- [ ] 고급 필터링 구현
  - 현재 기본 필터링만 있음
  - 고급 필터 옵션 추가
- [ ] 정렬 기능 개선
  - 현재 정렬 기능 있음
  - 정렬 옵션 추가
- [ ] 검색 기능 개선
  - 현재 검색 기능 있음
  - 검색 옵션 추가
- [ ] Instrument 상세 페이지
  - Instrument 상세 정보 표시
  - 이미지 갤러리
  - 판매 이력

**우선순위**: 낮음 (현재 기능으로 충분)

---

## 🧪 3순위: 품질 향상

### 8. 테스트 커버리지 향상 (43% → 70%)

**현재 상태**: 43% 커버리지

**작업 내용:**
- [ ] 페이지 컴포넌트 테스트 추가
  - Dashboard 페이지 테스트
  - Clients 페이지 테스트
  - Calendar 페이지 테스트
- [ ] E2E 테스트 확장
  - Dashboard E2E 테스트
  - Form E2E 테스트
  - Instruments E2E 테스트
- [ ] 통합 테스트 시나리오
  - 전체 플로우 테스트
  - 에러 케이스 테스트

**우선순위**: 중간 (코드 품질 향상)

---

### 9. 린터 경고 해결 (16개 → 0개)

**현재 상태**: 16개의 경고 (대부분 미사용 변수)

**작업 내용:**
- [ ] 미사용 변수 제거
  - 자동 수정 가능한 항목들
  - 수동 수정 필요한 항목들
- [ ] ESLint 설정 개선
  - 불필요한 경고 제거
  - 규칙 조정

**우선순위**: 낮음 (기능에 영향 없음)

---

### 10. 반응형 디자인 개선

**작업 내용:**
- [ ] 모바일 레이아웃 최적화
  - 현재 기본 반응형 지원
  - 모바일 최적화 개선
- [ ] 태블릿 레이아웃
  - 태블릿 화면 최적화
- [ ] 터치 제스처 지원 (선택적)
  - 스와이프 제스처
  - 터치 최적화
- [ ] 모바일 네비게이션
  - 모바일 메뉴 개선

**우선순위**: 낮음 (현재 반응형 지원됨)

---

### 11. 성능 최적화

**작업 내용:**
- [ ] 대용량 리스트 가상화
  - react-window 사용 (이미 설치됨)
  - 대량 데이터 처리 최적화
- [ ] 이미지 lazy loading
  - 이미지 지연 로딩
  - 성능 향상
- [ ] 코드 스플리팅
  - 동적 import 사용
  - 번들 크기 감소
- [ ] 메모리 누수 체크
  - 메모리 프로파일링
  - 메모리 누수 수정

**우선순위**: 낮음 (현재 성능 문제 없음)

---

### 12. UX 개선

**작업 내용:**
- [ ] 로딩 스켈레톤 UI
  - 현재 기본 로딩만 있음
  - 스켈레톤 UI 추가 (Skeleton 컴포넌트 이미 존재)
- [ ] 에러 상태 UI
  - 현재 기본 에러 메시지만 있음
  - 에러 상태 UI 개선
- [ ] Empty State UI
  - 빈 상태 UI 개선
- [ ] Toast 알림 시스템
  - 현재 ErrorToast만 있음
  - 성공/정보 Toast 추가
- [ ] 키보드 단축키 (선택적)
  - 자주 사용하는 기능에 단축키 추가

**우선순위**: 중간 (사용자 경험 향상)

---

## 🔒 4순위: 보안 및 배포

### 13. RLS 정책 세부화

**작업 내용:**
- [ ] 테이블별 세부 RLS 정책
  - 현재 기본 RLS만 있음
  - 세부 권한 관리
- [ ] 사용자별 권한 관리
  - 역할 기반 권한 관리
  - 사용자별 접근 제어
- [ ] 데이터 접근 제어
  - 데이터 접근 로깅
  - 접근 제어 개선

**우선순위**: 낮음 (현재 기본 RLS로 충분)

---

### 14. CI/CD 완성

**작업 내용:**
- [ ] GitHub Actions 설정 확인
  - CI 파이프라인 확인
  - 자동 테스트 확인
- [ ] Vercel 연동 확인
  - 자동 배포 확인
  - 환경 변수 설정 확인
- [ ] 자동 배포 설정
  - 자동 배포 확인
- [ ] 환경별 배포 전략
  - 스테이징/프로덕션 환경 분리

**우선순위**: 낮음 (현재 CI/CD 설정됨)

---

### 15. 모니터링 및 에러 추적

**작업 내용:**
- [ ] Sentry 연동 (선택적)
  - 에러 추적 설정
  - 에러 알림 설정
- [ ] 로깅 시스템 개선
  - 현재 기본 로깅만 있음
  - 구조화된 로깅
- [ ] 에러 알림 설정
  - 에러 발생 시 알림
- [ ] 성능 모니터링 (선택적)
  - 성능 메트릭 수집
  - 성능 대시보드

**우선순위**: 낮음 (프로덕션 배포 후)

---

## 📋 추가 개선 사항 (선택적)

### 16. 기타 기능

- [ ] 다국어 지원 (i18n)
- [ ] 다크 모드
- [ ] 프린트 기능
- [ ] 데이터 내보내기 (CSV, PDF)
- [ ] 백업/복원 기능
- [ ] 관리자 대시보드
- [ ] 알림 시스템
- [ ] 댓글/노트 기능
- [ ] 태그 시스템 개선
- [ ] 검색 고도화

**우선순위**: 매우 낮음 (추가 기능)

---

## 🎯 우선순위 요약

### 즉시 수행 (1순위)
1. ⭐ **데이터베이스 마이그레이션 실행** - 필수
2. ⭐ **인증 시스템 완성** - 프로덕션 배포 전 필수
3. ⭐ **환경 변수 설정 확인** - 필수

### 중기 목표 (2순위)
4. **이미지 업로드 기능** - 사용자 경험 향상
5. **Sales History 기능** - 비즈니스 기능
6. **테스트 커버리지 향상** - 코드 품질 향상
7. **UX 개선** - 사용자 경험 향상

### 장기 목표 (3-4순위)
8. **Customer 페이지 완성** - 낮은 우선순위
9. **Instruments 페이지 확장** - 낮은 우선순위
10. **성능 최적화** - 낮은 우선순위
11. **반응형 디자인 개선** - 낮은 우선순위
12. **RLS 정책 세부화** - 낮은 우선순위
13. **모니터링 및 에러 추적** - 프로덕션 배포 후

---

## 📊 현재 완성도

### 기능 완성도: 48/100 (D등급)
- ✅ CRUD 기능: 100%
- ✅ 검색/필터: 100%
- ⚠️ 인증 시스템: 30%
- ⚠️ 이미지 업로드: 10%
- ❌ Sales History: 0%
- ❌ Customer 페이지: 10%
- ❌ 모니터링: 0%

### 기술적 품질: 82/100 (A등급)
- ✅ 코드 구조: 95%
- ✅ 테스트: 90%
- ✅ 보안: 95%
- ⚠️ 코드 품질: 85%

### 종합 평가
- **기술적 품질**: ⭐⭐⭐⭐ (4/5)
- **기능 완성도**: ⭐⭐ (2/5)
- **프로덕션 준비도**: ⭐⭐⭐ (3/5)

**결론**: 잘 지어진 기반 구조를 가지고 있으나, 핵심 기능(인증, 이미지 업로드, Sales History)이 누락되어 있습니다. 2-4주간의 집중적인 기능 개발로 프로덕션 준비가 가능합니다.

---

## 🚀 다음 단계

1. **데이터베이스 마이그레이션 실행** (1일)
2. **인증 시스템 완성** (3-5일)
3. **이미지 업로드 기능** (3-5일)
4. **Sales History 기능** (5-7일)
5. **테스트 커버리지 향상** (3-5일)

**예상 기간**: 2-4주

---

**마지막 업데이트**: 2024-11-12

