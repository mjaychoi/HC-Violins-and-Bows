# 요구사항 정리 및 현재 상태

## 📊 현재 상태 요약

### ✅ 잘 작동하는 기능
- ✅ CRUD 기능 (Instruments, Clients, Connections) - 100%
- ✅ 캘린더 기능 - 80% (기본 기능 완료)
- ✅ 검색/필터/정렬 - 100%
- ✅ 인라인 편집 - 100%
- ✅ 태그 시스템 - 100%

### ⚠️ 테스트 상태
- ✅ 707개 테스트 통과
- ⚠️ 6개 테스트 실패 (ClientFilters, ClientsPage)
- ✅ 43% 테스트 커버리지

---

## 🎯 요구사항별 현재 상태

### 1. 테스팅 확인 ✅ (부분 완료)

**현재 상태:**
- ✅ 707개 테스트 통과
- ⚠️ 6개 테스트 실패
- ✅ 전체 기능은 동작 중

**작업 필요:**
- [ ] 실패한 테스트 수정 (ClientFilters.test.tsx, ClientsPage.test.tsx)
- [ ] 전체 기능 동작 확인
- [ ] E2E 테스트 실행

---

### 2. 캘린더 기능 개선 ⚠️ (80% 완료)

#### 2.1 현재 상태
- ✅ `personal_due_date` 필드 존재 (개인 목표 완료일)
- ✅ `received_date` 필드 존재 (접수일)
- ✅ `due_date` 필드 존재 (고객 요청 납기일)
- ✅ `scheduled_date` 필드 존재 (예약된 작업일)
- ✅ `ownership` 필드 표시 (악기 소유자)
- ⚠️ `client_id` 필드 없음 (클라이언트 직접 연결 없음)
- ⚠️ 날짜 정보가 UI에 명확하게 표시되지 않음

#### 2.2 필요한 개선 사항

**A. 클라이언트 연결 개선**
- [ ] `maintenance_tasks` 테이블에 `client_id` 필드 추가
- [ ] 작업 생성 시 클라이언트 선택 기능 추가
- [ ] 캘린더에 클라이언트 정보 명확히 표시
- [ ] "활 a는 누구 것" 정보 명확히 표시

**B. 날짜 정보 표시 개선**
- [ ] TaskList에 모든 날짜 정보 명확히 표시
  - "받은 날짜: YYYY-MM-DD" (received_date)
  - "고객 요청 납기일: YYYY-MM-DD" (due_date)
  - "개인 목표 완료일: YYYY-MM-DD" (personal_due_date)
  - "예약된 작업일: YYYY-MM-DD" (scheduled_date)
- [ ] CalendarView에 날짜 정보 표시
- [ ] 날짜별 색상 구분 (지연, 임박, 정상)

**C. 여러 작업 그룹화 표시**
- [ ] 같은 날짜의 여러 작업을 그룹화하여 표시
- [ ] "오늘 할 일", "내일 할 일" 섹션 추가
- [ ] "내일은 활털 a,b를 갈기로 되어있다" 같은 표시
- [ ] 작업 타입별 그룹화 (활털 갈기, 수리 등)

---

### 3. Certificate 기능 ❌ (10% 완료)

#### 3.1 현재 상태
- ✅ `certificate` boolean 필드 존재
- ❌ PDF 생성 기능 없음
- ❌ 가격 표시 기능 없음
- ❌ Certificate 생성 폼 없음

#### 3.2 필요한 작업

**A. Certificate 데이터 구조**
- [ ] Certificate 정보 저장 구조 결정
- [ ] Certificate 정보 필드 추가
  - 발급일
  - 유효기간
  - 발급자 정보
  - 가격 정보

**B. PDF 생성 기능**
- [ ] PDF 생성 라이브러리 설치
- [ ] Certificate PDF 템플릿 생성
- [ ] PDF 생성 컴포넌트 구현
- [ ] "Create Certificate" 버튼 추가

**Certificate PDF 내용:**
- 악기 정보 (Maker, Type, Year, Serial Number)
- 가격 정보
- 발급일
- 발급자 정보
- Certificate 번호

---

### 4. 고유 번호 기능 ❌ (0% 완료)

#### 4.1 현재 상태
- ❌ `serial_number` 필드 없음
- ❌ 악기 고유 번호 없음
- ❌ 클라이언트 고유 번호 없음

#### 4.2 필요한 작업

**A. 악기 고유 번호**
- [ ] `instruments` 테이블에 `serial_number` 필드 추가
- [ ] 고유 번호 생성 로직 구현
  - 형식: "VI123", "BO456" (악기 타입별)
  - 또는 랜덤 번호: "mj123"
  - 또는 사용자 정의 형식
- [ ] 고유 번호 표시
- [ ] 고유 번호 검색 기능

**B. 클라이언트 고유 번호**
- [ ] `clients` 테이블에 `client_number` 필드 추가
- [ ] 고유 번호 생성 로직 구현
- [ ] 고유 번호 표시
- [ ] 고유 번호 검색 기능

**C. 물리적 태그 연동 (선택적)**
- [ ] 고유 번호와 물리적 태그 매칭
- [ ] 태그 검색 기능
- [ ] 태그별 필터링

---

## 🚀 구현 우선순위

### 1순위: 즉시 수행 (필수)
1. ⭐ **테스트 수정** - 실패한 테스트 수정
2. ⭐ **캘린더 기능 개선** - 클라이언트 연결 및 날짜 표시 개선
3. ⭐ **데이터베이스 마이그레이션** - 필요한 필드 추가

### 2순위: 중기 목표 (중요)
4. **Certificate PDF 생성** - PDF 생성 기능 구현
5. **고유 번호 기능** - 악기/클라이언트 고유 번호 추가

### 3순위: 장기 목표 (선택적)
6. **물리적 태그 연동** - 태그 검색 및 필터링
7. **Certificate 상세 기능** - Certificate 관리 시스템

---

## 📋 다음 단계

### 1단계: 테스트 수정 (1일)
- [ ] 실패한 테스트 수정
- [ ] 전체 테스트 실행
- [ ] 기능 동작 확인

### 2단계: 캘린더 기능 개선 (2-3일)
- [ ] maintenance_tasks에 client_id 추가
- [ ] 날짜 정보 UI 개선
- [ ] 여러 작업 그룹화 표시

### 3단계: Certificate 기능 (3-5일)
- [ ] PDF 생성 라이브러리 설치
- [ ] Certificate PDF 템플릿 생성
- [ ] PDF 생성 기능 구현

### 4단계: 고유 번호 기능 (2-3일)
- [ ] serial_number 필드 추가
- [ ] 고유 번호 생성 로직 구현
- [ ] 고유 번호 표시 및 검색

---

**예상 기간**: 1-2주

**마지막 업데이트**: 2024-11-12

