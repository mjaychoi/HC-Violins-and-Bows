# 캘린더 기능 개선사항

**업데이트**: 2025-01-01

## 📊 현재 상태

### 테스트 커버리지

- ✅ `useMaintenanceTasks.ts` - 96.47% (우수)
- ⚠️ `calendar/page.tsx` - 63.41% (개선 필요)
- ⚠️ `CalendarView.tsx` - 50% (개선 필요)
- ❌ `GroupedTaskList.tsx` - 0% (테스트 없음)
- ⚠️ `TaskModal.tsx` - 테스트 있으나 커버리지 낮음

### 기능 완성도

- ✅ 기본 CRUD 기능 - 100%
- ✅ 캘린더 뷰 - 100%
- ✅ 리스트 뷰 - 100%
- ✅ 필터링 (상태, 소유자) - 100%
- ✅ 작업 그룹화 - 100%
- ✅ 날짜 정보 표시 - 100%
- ⚠️ 검색 기능 - 0%
- ⚠️ 정렬 기능 - 0%
- ⚠️ 드래그 앤 드롭 - 0%
- ⚠️ 알림 기능 - 0%

---

## 🎯 우선순위별 개선사항

### 1순위: 테스트 커버리지 향상 (즉시 수행)

#### 1.1 GroupedTaskList 테스트 추가

**현재 상태**: 0% 커버리지 (테스트 없음)

**작업 내용:**

- [ ] `GroupedTaskList.tsx` 테스트 파일 생성
- [ ] 작업 그룹화 테스트
- [ ] 날짜 표시 테스트
- [ ] 요약 메시지 테스트
- [ ] 작업 클릭/삭제 테스트

**예상 커버리지**: 0% → 80%+

#### 1.2 CalendarView 테스트 개선

**현재 상태**: 50% 커버리지

**작업 내용:**

- [ ] 이벤트 렌더링 테스트 추가
- [ ] 이벤트 스타일 테스트 추가
- [ ] 이벤트 클릭 테스트 추가
- [ ] 날짜 선택 테스트 추가
- [ ] 네비게이션 테스트 추가

**예상 커버리지**: 50% → 80%+

#### 1.3 CalendarPage 테스트 개선

**현재 상태**: 63.41% 커버리지

**작업 내용:**

- [ ] 필터링 테스트 추가
- [ ] 뷰 전환 테스트 추가
- [ ] 작업 생성/수정/삭제 테스트 추가
- [ ] 에러 핸들링 테스트 추가
- [ ] 날짜 범위 변경 테스트 추가

**예상 커버리지**: 63.41% → 80%+

---

### 2순위: 기능 개선 (중간 우선순위)

#### 2.1 검색 기능 추가

**현재 상태**: 검색 기능 없음

**작업 내용:**

- [ ] 작업 제목 검색
- [ ] 악기 이름 검색
- [ ] 클라이언트 이름 검색
- [ ] 작업 타입 검색
- [ ] 설명 검색

**구현 방법:**

```typescript
// calendar/page.tsx에 검색 입력 추가
const [searchTerm, setSearchTerm] = useState('');

const filteredTasks = useMemo(() => {
  let filtered = tasks;

  // 검색 필터
  if (searchTerm) {
    const lowerSearch = searchTerm.toLowerCase();
    filtered = filtered.filter(task => {
      return (
        task.title.toLowerCase().includes(lowerSearch) ||
        task.description?.toLowerCase().includes(lowerSearch) ||
        // ... 기타 검색 조건
      );
    });
  }

  return filtered;
}, [tasks, searchTerm, filterStatus, filterOwnership]);
```

#### 2.2 정렬 기능 추가

**현재 상태**: 정렬 기능 없음

**작업 내용:**

- [ ] 날짜별 정렬 (오름차순/내림차순)
- [ ] 우선순위별 정렬
- [ ] 상태별 정렬
- [ ] 작업 타입별 정렬

**구현 방법:**

```typescript
// calendar/page.tsx에 정렬 옵션 추가
const [sortBy, setSortBy] = useState<'date' | 'priority' | 'status'>('date');
const [sortOrder, setSortOrder] = useState<'asc' | 'desc'>('asc');

const sortedTasks = useMemo(() => {
  const sorted = [...filteredTasks];

  sorted.sort((a, b) => {
    // 정렬 로직
  });

  return sorted;
}, [filteredTasks, sortBy, sortOrder]);
```

#### 2.3 작업 복제 기능

**현재 상태**: 작업 복제 기능 없음

**작업 내용:**

- [ ] 작업 복제 버튼 추가
- [ ] 기존 작업 정보 복사
- [ ] 새 작업 생성 폼에 자동 입력

#### 2.4 작업 일괄 작업 기능

**현재 상태**: 일괄 작업 기능 없음

**작업 내용:**

- [ ] 작업 선택 기능 (체크박스)
- [ ] 일괄 삭제
- [ ] 일괄 상태 변경
- [ ] 일괄 우선순위 변경

---

### 3순위: UI/UX 개선 (중간 우선순위)

#### 3.1 날짜 표시 개선

**현재 상태**: 날짜 정보는 표시되나 개선 여지 있음

**개선 사항:**

- [ ] 상대 날짜 표시 (예: "3일 전", "2일 후")
- [ ] 날짜 색상 구분 (지연, 임박, 정상)
- [ ] 날짜 아이콘 추가
- [ ] 날짜 툴팁 추가

**구현 방법:**

```typescript
// GroupedTaskList.tsx에 상대 날짜 표시 추가
const getRelativeDate = (date: string) => {
  const daysDiff = differenceInDays(parseISO(date), new Date());
  if (daysDiff === 0) return 'Today';
  if (daysDiff === 1) return 'Tomorrow';
  if (daysDiff === -1) return 'Yesterday';
  if (daysDiff > 0) return `In ${daysDiff} days`;
  return `${Math.abs(daysDiff)} days ago`;
};
```

#### 3.2 색상 개선

**현재 상태**: 기본 색상 사용 중

**개선 사항:**

- [ ] 우선순위별 색상 구분 강화
- [ ] 상태별 색상 구분 강화
- [ ] 지연 작업 강조 색상
- [ ] 임박 작업 강조 색상

#### 3.3 레이아웃 개선

**현재 상태**: 기본 레이아웃 사용 중

**개선 사항:**

- [ ] 반응형 레이아웃 개선
- [ ] 모바일 최적화
- [ ] 태블릿 최적화
- [ ] 작업 카드 레이아웃 개선

#### 3.4 접근성 개선

**현재 상태**: 기본 접근성 지원

**개선 사항:**

- [ ] 키보드 네비게이션 개선
- [ ] 스크린 리더 지원 개선
- [ ] ARIA 레이블 추가
- [ ] 포커스 관리 개선

---

### 4순위: 성능 개선 (낮은 우선순위)

#### 4.1 메모이제이션 최적화

**현재 상태**: 일부 메모이제이션 사용 중

**개선 사항:**

- [ ] 불필요한 리렌더링 방지
- [ ] useMemo 최적화
- [ ] useCallback 최적화
- [ ] React.memo 사용

#### 4.2 데이터 페칭 최적화

**현재 상태**: 기본 데이터 페칭 사용 중

**개선 사항:**

- [ ] 무한 스크롤 구현
- [ ] 가상화 (react-window) 사용
- [ ] 데이터 캐싱
- [ ] 페이지네이션

#### 4.3 번들 크기 최적화

**현재 상태**: react-big-calendar 사용 중

**개선 사항:**

- [ ] 코드 스플리팅
- [ ] 동적 import 사용
- [ ] 불필요한 의존성 제거

---

### 5순위: 고급 기능 (낮은 우선순위)

#### 5.1 드래그 앤 드롭

**현재 상태**: 드래그 앤 드롭 없음

**작업 내용:**

- [ ] 작업 날짜 변경 (드래그)
- [ ] 작업 순서 변경 (드래그)
- [ ] react-beautiful-dnd 또는 dnd-kit 사용

#### 5.2 알림 기능

**현재 상태**: 알림 기능 없음

**작업 내용:**

- [ ] 지연된 작업 알림
- [ ] 오늘 예정된 작업 알림
- [ ] 납기일 임박 알림
- [ ] 브라우저 알림
- [ ] 이메일 알림 (선택적)

#### 5.3 통계 및 리포트

**현재 상태**: 통계 기능 없음

**작업 내용:**

- [ ] 작업 완료율
- [ ] 평균 소요 시간
- [ ] 작업 타입별 통계
- [ ] 월별/연도별 리포트
- [ ] PDF 리포트 생성

#### 5.4 캘린더 뷰 확장

**현재 상태**: 월별 뷰만 사용 중

**작업 내용:**

- [ ] 주별 뷰 개선
- [ ] 일별 뷰 개선
- [ ] 연도별 뷰 추가
- [ ] 타임라인 뷰 추가

---

## 🐛 버그 수정

### 1. ESLint 경고 수정

**현재 상태**: 1개 경고

**작업 내용:**

- [ ] `TaskModal.tsx` Line 192: `bg-gradient-to-r` → `bg-linear-to-r` 수정
- [ ] 기타 ESLint 경고 수정

### 2. 타입 안정성 개선

**현재 상태**: 기본 타입 사용 중

**작업 내용:**

- [ ] `any` 타입 제거
- [ ] 타입 가드 추가
- [ ] null 체크 강화

### 3. 에러 핸들링 개선

**현재 상태**: 기본 에러 핸들링 사용 중

**작업 내용:**

- [ ] 에러 메시지 개선
- [ ] 에러 복구 메커니즘 추가
- [ ] 에러 로깅 개선

---

## 📋 구현 우선순위

### 즉시 수행 (1-2주)

1. ✅ **테스트 커버리지 향상**
   - GroupedTaskList 테스트 추가
   - CalendarView 테스트 개선
   - CalendarPage 테스트 개선

2. ✅ **버그 수정**
   - ESLint 경고 수정
   - 타입 안정성 개선

### 중기 목표 (2-4주)

3. **기능 개선**
   - 검색 기능 추가
   - 정렬 기능 추가
   - 작업 복제 기능 추가

4. **UI/UX 개선**
   - 날짜 표시 개선
   - 색상 개선
   - 레이아웃 개선

### 장기 목표 (1-2개월)

5. **성능 개선**
   - 메모이제이션 최적화
   - 데이터 페칭 최적화
   - 번들 크기 최적화

6. **고급 기능**
   - 드래그 앤 드롭
   - 알림 기능
   - 통계 및 리포트

---

## 🔍 코드 품질 개선

### 1. 코드 리팩토링

**작업 내용:**

- [ ] 중복 코드 제거
- [ ] 함수 분리
- [ ] 컴포넌트 분리
- [ ] 상수 추출

### 2. 문서화 개선

**작업 내용:**

- [ ] JSDoc 주석 추가
- [ ] 타입 문서화
- [ ] 사용 예제 추가
- [ ] API 문서화

### 3. 코드 스타일 개선

**작업 내용:**

- [ ] 일관된 네이밍
- [ ] 일관된 포맷팅
- [ ] ESLint 규칙 준수
- [ ] Prettier 적용

---

## 📊 예상 결과

### 테스트 커버리지

- **현재**: 46.18% (전체)
- **목표**: 60%+ (전체)
- **캘린더**: 50-63% → 80%+

### 기능 완성도

- **현재**: 70%
- **목표**: 90%+
- **추가 기능**: 검색, 정렬, 복제, 일괄 작업

### 성능

- **현재**: 기본 성능
- **목표**: 최적화된 성능
- **개선**: 메모이제이션, 데이터 페칭 최적화

---

## 🚀 다음 단계

### 1단계: 테스트 커버리지 향상 (1-2주)

1. GroupedTaskList 테스트 추가
2. CalendarView 테스트 개선
3. CalendarPage 테스트 개선

### 2단계: 기능 개선 (2-4주)

1. 검색 기능 추가
2. 정렬 기능 추가
3. 작업 복제 기능 추가

### 3단계: UI/UX 개선 (2-4주)

1. 날짜 표시 개선
2. 색상 개선
3. 레이아웃 개선

### 4단계: 성능 개선 (1-2개월)

1. 메모이제이션 최적화
2. 데이터 페칭 최적화
3. 번들 크기 최적화

---

**마지막 업데이트**: 2025-01-01
