# Certificate Template Design 검토 사항

**작성일**: 2025-01-XX  
**대상**: `src/components/certificates/CertificateDocument.tsx`  
**목적**: 인증서 템플릿 디자인 및 구현 검토

---

## 📋 검토 항목

### 1. 디자인 및 레이아웃

#### 1.1 전체 구조

- [ ] **페이지 레이아웃**: A4 사이즈, 여백(50px) 적절한지 확인
- [ ] **단일 컬럼 레이아웃**: 전통적인 문서 스타일 유지 확인
- [ ] **워터마크**: 로고 워터마크(opacity 0.05) 적절한지 확인
- [ ] **폰트**: Times-Roman/Helvetica 기본 폰트 사용 (한글 폰트 미지원 상태)

#### 1.2 헤더 섹션

- [ ] **브랜드명**: "HC Violins and Bows" 표시 위치 및 스타일
- [ ] **태그라인**: "Premium String Instruments" 표시
- [ ] **인증서 제목**: "Certificate of Authenticity" 대문자, 적절한 간격
- [ ] **구분선**: 헤더 하단 구분선 스타일

#### 1.3 악기 정보 섹션

- [ ] **Maker + Year 형식**: "Maker, circa Year" 표기법 일관성
- [ ] **악기 타입**: Type 표시 (첫 글자 대문자)
- [ ] **구분선**: 악기 정보 하단 구분선

#### 1.4 필드 섹션

- [ ] **필드 레이블/값**: 10pt 동일 크기, 적절한 간격
- [ ] **필드 순서**: Ownership, Serial Number, Year, Type, Subtype, Size, Weight 등
- [ ] **구분선**: 필드 섹션 상하단 구분선

#### 1.5 설명 섹션

- [ ] **악기 설명**: 문장 형식으로 작성
- [ ] **추가 관찰사항**: 이탤릭체로 표시
- [ ] **지원 문구**: "This certificate is issued by..." 문구

#### 1.6 서명 섹션

- [ ] **서명 라인**: 높이 60px, 적절한 위치
- [ ] **서명자 정보**: 이름, 직함 표시
- [ ] **날짜**: 발행일/서명일 구분
- [ ] **인장 가이드**: 원형 가이드(80x60px) 표시

#### 1.7 메타데이터

- [ ] **인증서 번호**: "CERT-{SERIAL}-{YEAR}" 형식
- [ ] **검증 URL**: `https://www.hcviolins.com/verify/{certNumber}`
- [ ] **발행일**: ISO 날짜 형식
- [ ] **하단 푸터**: 연락처 정보

---

### 2. 데이터 표시

#### 2.1 필수 필드

- [ ] **Maker**: null일 경우 "Unknown maker" 표시
- [ ] **Type**: null일 경우 처리
- [ ] **Serial Number**: null일 경우 처리
- [ ] **Year**: "circa {year}" 형식, null일 경우 생략

#### 2.2 선택 필드

- [ ] **Ownership**: 선택적 표시 (프라이버시 고려)
- [ ] **Subtype**: null일 경우 생략
- [ ] **Size/Weight**: null일 경우 생략
- [ ] **Certificate Number**: 제공되지 않으면 자동 생성

#### 2.3 날짜 처리

- [ ] **발행일**: `issuedAt` prop 또는 현재 날짜
- [ ] **서명일**: `signatureDate` prop (발행일과 별도)
- [ ] **날짜 형식**: YYYY-MM-DD 형식 일관성

---

### 3. 스타일링 및 브랜딩

#### 3.1 색상

- [ ] **잉크 색상**: `#1A1A1A` (진한 검정)
- [ ] **보조 텍스트**: `#4A4A4A` (회색)
- [ ] **구분선**: `#D4D4D4` (연한 회색)
- [ ] **배경**: `#FFFFFF` (흰색)

#### 3.2 폰트

- [ ] **기본 폰트**: Times-Roman (serif)
- [ ] **볼드**: Times-Bold
- [ ] **한글 폰트**: 현재 미지원 (로컬 폰트 파일 필요)
- [ ] **폰트 크기**: 제목 24pt, 본문 10-11pt, 메타데이터 7-9pt

#### 3.3 간격 및 여백

- [ ] **페이지 여백**: 상단 50px, 하단 70px, 좌우 50px
- [ ] **섹션 간격**: 24-35px
- [ ] **필드 간격**: 8-12px
- [ ] **서명 섹션**: 상단 여백 50px

---

### 4. 기능적 검토

#### 4.1 Props 검증

- [ ] **필수 props**: `instrument` (Instrument 타입)
- [ ] **선택 props**: `logoSrc`, `verifyUrl`, `ownerName`, `certificateNumber`, `issuedAt`, `signerName`, `signerTitle`, `signatureDate`, `hasEmbossedSeal`
- [ ] **기본값 처리**: 각 선택 prop의 기본값 적절한지

#### 4.2 인증서 번호 생성

- [ ] **자동 생성 로직**: `CERT-{SERIAL}-{YEAR}` 형식
- [ ] **Serial Number 없을 경우**: Instrument ID 사용
- [ ] **일관성**: 같은 악기는 같은 번호 유지 (DB 저장 필요)

#### 4.3 로고 처리

- [ ] **로컬 파일**: `public/logo.png` 우선 시도
- [ ] **환경 변수**: `NEXT_PUBLIC_LOGO_URL` 폴백
- [ ] **Data URI**: Base64 인코딩으로 변환
- [ ] **에러 처리**: 로고 없을 경우 워터마크 생략

#### 4.4 검증 URL

- [ ] **기본 URL**: `https://www.hcviolins.com/verify/{certNumber}`
- [ ] **커스텀 URL**: `verifyUrl` prop 지원
- [ ] **URL 형식**: 올바른 형식인지 확인

---

### 5. 프로덕션 준비

#### 5.1 환경 변수

- [ ] **`NEXT_PUBLIC_STORE_PHONE`**: 매장 전화번호
- [ ] **`NEXT_PUBLIC_DEFAULT_SIGNER_NAME`**: 기본 서명자 이름
- [ ] **`NEXT_PUBLIC_LOGO_URL`**: 로고 URL (선택)
- [ ] **모든 환경 변수**: 프로덕션 환경에 설정되어 있는지

#### 5.2 데이터베이스 연동

- [ ] **인증서 번호 저장**: DB에 저장하여 일관성 유지
- [ ] **발행일 저장**: DB에 저장하여 타임존 이슈 방지
- [ ] **서명자 정보**: DB에 저장 (선택)

#### 5.3 에러 처리

- [ ] **로고 로드 실패**: 워터마크 생략, 문서는 정상 생성
- [ ] **필수 필드 누락**: 적절한 기본값 표시
- [ ] **PDF 생성 실패**: 에러 메시지 반환

#### 5.4 성능

- [ ] **PDF 크기**: 5MB 이하 유지 확인
- [ ] **렌더링 시간**: 서버 사이드 렌더링 성능
- [ ] **메모리 사용**: 대량 생성 시 메모리 이슈

---

### 6. 사용자 경험

#### 6.1 프리뷰

- [ ] **웹 프리뷰**: PDF 다운로드 전 미리보기 기능 (선택)
- [ ] **인쇄 최적화**: 인쇄 시 레이아웃 유지

#### 6.2 다운로드

- [ ] **파일명**: `certificate-{serialNumber}.pdf` 형식
- [ ] **다운로드 버튼**: UI에서 접근 가능한지
- [ ] **에러 처리**: 다운로드 실패 시 사용자 알림

#### 6.3 검증

- [ ] **검증 페이지**: `/verify/{certNumber}` 라우트 구현 여부
- [ ] **검증 로직**: 인증서 번호로 악기 정보 조회
- [ ] **검증 UI**: 사용자 친화적인 검증 페이지

---

### 7. 개선 제안

#### 7.1 한글 폰트 지원

- [ ] **로컬 폰트 파일**: `/public/fonts/NotoSansKR-Regular.ttf` 추가
- [ ] **폰트 등록**: react-pdf의 `Font.register()` 사용
- [ ] **폰트 로딩**: 서버 사이드에서 안정적으로 로드

#### 7.2 템플릿 변형

- [ ] **다양한 스타일**: 클래식, 모던, 미니멀 등
- [ ] **커스터마이징**: 사용자가 스타일 선택 가능
- [ ] **템플릿 저장**: 자주 사용하는 설정 저장

#### 7.3 다국어 지원

- [ ] **영어/한국어**: 언어별 템플릿
- [ ] **날짜 형식**: 로케일별 날짜 형식
- [ ] **통화 형식**: 가격 표시 형식

---

## ✅ 체크리스트

### 필수 검토 (프로덕션 전)

- [ ] 모든 필수 필드가 올바르게 표시되는지
- [ ] 인증서 번호 생성 로직이 일관적인지
- [ ] 환경 변수가 모두 설정되어 있는지
- [ ] PDF 생성이 안정적으로 작동하는지
- [ ] 에러 처리가 적절한지

### 권장 검토

- [ ] 디자인이 브랜드 가이드라인에 맞는지
- [ ] 인쇄 시 레이아웃이 유지되는지
- [ ] 검증 URL이 올바르게 작동하는지
- [ ] 사용자 피드백 반영 여부

---

## 📝 참고 파일

- **구현 파일**: `src/components/certificates/CertificateDocument.tsx`
- **API 라우트**: `src/app/api/certificates/[id]/route.tsx`
- **테스트**: `src/app/api/certificates/[id]/__tests__/route.test.tsx`
- **환경 변수**: `.env.template`

---

**검토자**: **\*\***\_\_\_**\*\***  
**검토일**: **\*\***\_\_\_**\*\***  
**다음 검토일**: **\*\***\_\_\_**\*\***
